!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.epsilon=1e-5;var r=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t[0]instanceof Float32Array){if(2!==t[0].length)throw new Error;this.data=t[0]}else{var i="number"==typeof t[0]?t[0]:0,r="number"==typeof t[1]?t[1]:0;this.data=new Float32Array([i,r])}}return Object.defineProperty(t.prototype,"x",{get:function(){return this.data[0]},set:function(t){this.data[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.data[1]},set:function(t){this.data[1]=t},enumerable:!0,configurable:!0}),t.prototype.Clone=function(){return new t(this.x,this.y)},t.prototype.SetZero=function(){return this.x=0,this.y=0,this},t.prototype.Set=function(t,e){return this.x=t,this.y=e,this},t.prototype.Copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.SelfAdd=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.SelfAddXY=function(t,e){return this.x+=t,this.y+=e,this},t.prototype.SelfSub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.SelfSubXY=function(t,e){return this.x-=t,this.y-=e,this},t.prototype.SelfMul=function(t){return this.x*=t,this.y*=t,this},t.prototype.SelfMulAdd=function(t,e){return this.x+=t*e.x,this.y+=t*e.y,this},t.prototype.SelfMulSub=function(t,e){return this.x-=t*e.x,this.y-=t*e.y,this},t.prototype.Dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.Cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.Length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.LengthSquared=function(){var t=this.x,e=this.y;return t*t+e*e},t.prototype.Normalize=function(){var t=this.Length();if(t>=e.epsilon){var i=1/t;this.x*=i,this.y*=i}return t},t.prototype.SelfNormalize=function(){var t=this.Length();if(t>=e.epsilon){var i=1/t;this.x*=i,this.y*=i}return this},t.prototype.SelfRotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.x;return this.x=e*r-i*this.y,this.y=i*r+e*this.y,this},t.prototype.SelfRotateCosSin=function(t,e){var i=this.x;return this.x=t*i-e*this.y,this.y=e*i+t*this.y,this},t.prototype.IsValid=function(){return isFinite(this.x)&&isFinite(this.y)},t.prototype.SelfCrossVS=function(t){var e=this.x;return this.x=t*this.y,this.y=-t*e,this},t.prototype.SelfCrossSV=function(t){var e=this.x;return this.x=-t*this.y,this.y=t*e,this},t.prototype.SelfNeg=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.SelfSkew=function(){var t=this.x;return this.x=-this.y,this.y=t,this},t.RotateV=function(t,e,i){var r=t.x,n=t.y,o=Math.cos(e),s=Math.sin(e);return i.x=o*r-s*n,i.y=s*r+o*n,i},t.DotVV=function(t,e){return t.x*e.x+t.y*e.y},t.CrossVV=function(t,e){return t.x*e.y-t.y*e.x},t.CrossVS=function(t,e,i){var r=t.x;return i.x=e*t.y,i.y=-e*r,i},t.CrossVOne=function(t,e){var i=t.x;return e.x=t.y,e.y=-i,e},t.CrossSV=function(t,e,i){var r=e.x;return i.x=-t*e.y,i.y=t*r,i},t.CrossOneV=function(t,e){var i=t.x;return e.x=-t.y,e.y=i,e},t.AddVV=function(t,e,i){return i.x=t.x+e.x,i.y=t.y+e.y,i},t.SubVV=function(t,e,i){return i.x=t.x-e.x,i.y=t.y-e.y,i},t.MulSV=function(t,e,i){return i.x=e.x*t,i.y=e.y*t,i},t.MulVS=function(t,e,i){return i.x=t.x*e,i.y=t.y*e,i},t.AddVMulSV=function(t,e,i,r){return r.x=t.x+e*i.x,r.y=t.y+e*i.y,r},t.SubVMulSV=function(t,e,i,r){return r.x=t.x-e*i.x,r.y=t.y-e*i.y,r},t.AddVCrossSV=function(t,e,i,r){var n=i.x;return r.x=t.x-e*i.y,r.y=t.y+e*n,r},t.MidVV=function(t,e,i){return i.x=.5*(t.x+e.x),i.y=.5*(t.y+e.y),i},t.ExtVV=function(t,e,i){return i.x=.5*(e.x-t.x),i.y=.5*(e.y-t.y),i},t.IsEqualToV=function(t,e){return t.x===e.x&&t.y===e.y},t.DistanceVV=function(t,e){var i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)},t.DistanceSquaredVV=function(t,e){var i=t.x-e.x,r=t.y-e.y;return i*i+r*r},t.NegV=function(t,e){return e.x=-t.x,e.y=-t.y,e},t.ZERO=new t(0,0),t.UNITX=new t(1,0),t.UNITY=new t(0,1),t.s_t0=new t,t.s_t1=new t,t.s_t2=new t,t.s_t3=new t,t}();e.Vec2=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(2),n=i(3),o=i(4),s=i(0),c=function(){function t(){var t=this;this.isPause=!0,this.flag=0,this.btnStart=document.getElementById("btnStart"),this.btnReset=document.getElementById("btnReset"),this.canvas=document.getElementById("canvas"),this.render=new n.Render(this.canvas.getContext("2d")),this.btnStart.onclick=function(){t.isPause=!t.isPause,t.isPause?t.btnStart.innerHTML="开始":t.btnStart.innerHTML="暂停"},this.btnReset.onclick=function(){t.reset()},window.onkeyup=function(e){switch(e.keyCode){case 48:case 96:t.flag=0;break;case 37:t.flag=1;break;case 38:t.flag=2;break;case 39:t.flag=3;break;case 40:t.flag=4;break;case 73:t.circleBody.ApplyImpulse(new s.Vec2(0,-200))}},this.world=new r.World,this.world.gravity=new s.Vec2(0,100),this.circleBody=new o.Body(this.world),this.circleBody.position=new s.Vec2(100,300),this.circleBody.velocity=new s.Vec2(200,0),this.circleBody.damping=0,this.world.addBody(this.circleBody),this.Update()}return t.prototype.Update=function(){var t=this;requestAnimationFrame(function(){return t.Update()});var e=performance.now();if(this.elapsedTime=this.previousTime?(e-this.previousTime)/1e3:0,this.previousTime=e,this.elapsedTime>0){if(this.isPause)return;switch(this.circleBody.position.x<20?(this.circleBody.position.x=20,this.circleBody.velocity.x=-this.circleBody.velocity.x):this.circleBody.position.x>780&&(this.circleBody.position.x=780,this.circleBody.velocity.x=-this.circleBody.velocity.x),this.circleBody.position.y<20?(this.circleBody.position.y=20,this.circleBody.velocity.y=-this.circleBody.velocity.y):this.circleBody.position.y>580&&(this.circleBody.position.y=580,this.circleBody.velocity.y=-this.circleBody.velocity.y),this.flag){case 0:this.circleBody.ApplyForce(s.Vec2.ZERO);break;case 1:this.circleBody.ApplyForce(new s.Vec2(-100,0));break;case 2:this.circleBody.ApplyForce(new s.Vec2(0,-100));break;case 3:this.circleBody.ApplyForce(new s.Vec2(100,0));break;case 4:this.circleBody.ApplyForce(new s.Vec2(0,100))}this.world.step(this.elapsedTime)}this.render.draw(this.world)},t.prototype.reset=function(){this.circleBody.position=new s.Vec2(100,300),this.circleBody.velocity=new s.Vec2(200,0),this.btnStart.innerHTML="开始",this.isPause=!0,this.render.draw(this.world)},t}();e.test=c,window.onload=function(){new c}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(){function t(){this.gravity=new r.Vec2(0,10),this.bodies=new Array}return t.prototype.addBody=function(t){this.bodies.push(t)},t.prototype.step=function(t){for(var e=0;e<this.bodies.length;e++)this.bodies[e].Integrate(t)},t}();e.World=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.ctx=t}return t.prototype.draw=function(t){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.save();for(var e=0;e<t.bodies.length;e++){var i=t.bodies[e];this.drawSolidCircle(i.position.x,i.position.y,20)}this.ctx.restore()},t.prototype.drawSolidCircle=function(t,e,i){var r=this.ctx;if(r){var n=t,o=e;r.beginPath(),r.arc(n,o,i,0,2*Math.PI,!0),r.moveTo(n,o),r.lineTo(n+i,o),r.fillStyle="rgba(255,0,0,0.5)",r.fill(),r.strokeStyle="rgb(255,0,0)",r.stroke()}},t}();e.Render=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),n=function(){function t(t){this.position=r.Vec2.ZERO,this.velocity=r.Vec2.ZERO,this.gravity=r.Vec2.ZERO,this.force=r.Vec2.ZERO,this._mass=1,this._invMass=1,this._damping=.1,this.gravity=t.gravity}return Object.defineProperty(t.prototype,"mass",{get:function(){return this._mass},set:function(t){t<=0&&(this._mass=1),this._invMass=1/this._mass},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"damping",{get:function(){return this._damping},set:function(t){t<=0&&(this._damping=0)},enumerable:!0,configurable:!0}),t.prototype.ApplyForce=function(t){this.force.x+=t.x,this.force.y+=t.y},t.prototype.ApplyImpulse=function(t){this.velocity.x+=this._invMass*t.x,this.velocity.y+=this._invMass*t.y},t.prototype.Integrate=function(t){this.velocity.x+=(this.force.x*this._invMass+this.gravity.x)*t,this.velocity.y+=(this.force.y*this._invMass+this.gravity.y)*t,this.velocity.SelfMul(1/(1+t*this.damping)),this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t,this.clearForce()},t.prototype.clearForce=function(){this.force.x=this.force.y=0},t}();e.Body=n}]);